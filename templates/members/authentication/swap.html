{% extends 'members/base.html' %}
{% block title %}Sign In{% endblock %}
{% block content %}
<div class="glass p-8 w-full max-w-md mx-auto mt-[5rem] responsive-card">
<style>
  @media (max-width: 640px) {
    .responsive-card {
      padding: 1rem !important;
      border-radius: 0.75rem !important;
      margin-top: 1.25rem !important;
      max-width: 95vw !important;
    }
    .glass-btn {
      padding: 0.5rem 1rem !important;
      font-size: 1rem !important;
    }
  }
</style>
  <h2 class="text-2xl font-bold neon mb-6 text-center">Member Sign In</h2>
  <form method="post" class="space-y-6">
    {% csrf_token %}
    {{ form.non_field_errors }}
    <div>
      <label for="id_username" class="block mb-1 text-sm font-medium">Username</label>
      {{ form.username.as_widget|safe }}
      <style>
        #id_username {
          background: #fff !important;
          color: #222 !important;
          border: 1px solid #334155;
        }
        #id_username::placeholder {
          color: #888 !important;
        }
      </style>
      <script>
        document.addEventListener('DOMContentLoaded', function() {
          var input = document.getElementById('id_username');
          if (input) {
            input.setAttribute('autocomplete', 'off');
            input.setAttribute('inputmode', 'text');
            input.setAttribute('pattern', '^\\+\\d{1,4}\\d{8,}$');
            input.setAttribute('maxlength', '20');
          }
        });
      </script>
      {% if form.username.errors %}
        <div class="text-red-400 text-xs mt-1">{{ form.username.errors.0 }}</div>
      {% endif %}
    </div>
    <div>
      <label for="id_password" class="block mb-1 text-sm font-medium">Password</label>
      {{ form.password }}
      {% if form.password.errors %}
        <div class="text-red-400 text-xs mt-1">{{ form.password.errors.0 }}</div>
      {% endif %}
    </div>
    <button type="submit" class="w-full glass-btn mt-4">Sign In</button>
    <p class="text-xs text-center mt-4">Don't have an account? <a href="{% url 'members:register' %}" class="text-blue-400 hover:underline">Register</a></p>
    <p class="text-xs text-center mt-4">Forgot your password? <a href="{% url 'members:forgot_password' %}?username={{ form.username.value|urlencode }}" class="text-blue-400 hover:underline">Reset it here</a></p>
  </form>
</div>
{% endblock %}